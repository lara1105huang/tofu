import{d as oe,r as s,a as ae,c as se,o as te,b as _,e,F as E,f as k,w as x,v as U,g as a,h as i,i as g,j as v,k as p,t as c,l as A,n as ne,u as re}from"./index.004342b2.js";import{a as de,e as ie}from"./index.1e2e6164.js";import{h as $}from"./moment.9709ab41.js";import{f as b}from"./firebaseConfig.615b9655.js";const me={class:"tofu-area"},ce={class:"menu"},ve=["onClick"],_e=e("span",null,"\u5143",-1),pe=e("i",{class:"fa-solid fa-circle-plus"},null,-1),fe=e("div",{class:"cart_sun"},[e("h4",null,"\u81EA\u53D6\u8CFC\u7269\u8ECA"),e("p",null,"\u8ACB\u65BC\u8A02\u99101\u5C0F\u6642\u4E4B\u5167\u4F86\u96FB\u9818\u53D6\u8CFC\u7269\u9805\u76EE\uFF0C\u8B1D\u8B1D\u60A8\u7684\u5408\u4F5C\uFF01"),e("p",null,"\u672C\u5E97\u63A1\u73FE\u91D1\u4EA4\u6613\uFF01")],-1),Fe={class:"menu_shop"},Ae=e("div",{class:"order_content_headline"},"\u8A02\u8CFC\u5167\u5BB9\uFF1A",-1),Ce={class:"form-area"},he={class:"cartAll"},De={class:"cart-item"},ge={class:"cart-title"},be={class:"price"},ye=e("span",{class:"money-icon"},"$",-1),Be=e("span",{class:"mount-icon"},"x",-1),Ve={class:"count"},Ee={class:"sum"},ke=e("span",{class:"money-icon"},"$",-1),we={class:"handler"},Ye=["onClick"],Me=["onClick"],Te=["onClick"],xe=["onClick"],Ue={class:"countAllTotal"},$e=e("span",{class:"mount-icon"},"$",-1),Ne={class:"order_info"},Se=e("div",{class:"headline"},"\u8A02\u8CFC\u4EBA\u8CC7\u6599\uFF1A",-1),ze={class:"demonstration"},He={class:"el-dialog__body"},Oe=e("div",{class:"m5 orderNumber"},[e("b",null,"\u8A02\u55AE\u7DE8\u865F\uFF1A")],-1),qe={class:"m5"},We=e("div",null,"\u8ACB\u60A8\u5728\u9810\u5B9A\u6642\u9593\u5167\u5B8C\u6210\u8A02\u55AE\u4EA4\u6613\uFF01\u611F\u8B1D\u60A8\u7684\u5408\u4F5C\uFF01",-1),Le=e("div",null,"\u806F\u7D61\u96FB\u8A71: 0919 271 644",-1),Ze=e("div",null,"\u5730\u5740\uFF1A\u5927\u91CC\u5340\u5927\u5CF0\u8DEF530-1\u865F",-1),Pe=e("div",{class:"google-map"},[e("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3642.4376310516127!2d120.6853299761132!3d24.086100775804347!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34693c9817510cbd%3A0xc9bb1dec7cfc5b9f!2zNDEy5Y-w5Lit5biC5aSn6YeM5Y2A5aSn5bOw6LevNTMwLTHomZ8!5e0!3m2!1szh-TW!2stw!4v1670514691389!5m2!1szh-TW!2stw",style:{border:"0"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"})],-1),Qe={class:"dialog-footer"},Ke=oe({__name:"Home",setup(Re){const N=s(""),S=s(""),z=s(""),H=s(""),O=s("");s();const y=s(),B=s(),C=s(!1),h=s(),w=s(!1),r=s([]),f=s($(new Date).format("YYYY-MM-DD-HHmmssSSS")),n=s({name:"",email:"",phone:"",status:"",time:""}),Y=s(),q=ae({name:[{required:!0,message:"\u8ACB\u8F38\u5165\u60A8\u7684\u59D3\u540D",trigger:"blur"}],email:[{required:!0,message:"\u8ACB\u8F38\u5165\u60A8\u7684email",trigger:"blur"}],phone:[{required:!0,message:"\u8ACB\u8F38\u5165\u60A8\u7684\u884C\u52D5\u96FB\u8A71",trigger:"blur"},{min:10,max:10,message:"\u884C\u52D5\u96FB\u8A71\u865F\u78BC\u70BA10\u78BC\uFF01",trigger:"blur"}],status:[{required:!0,message:"\u8ACB\u9078\u64C7\u4F60\u7684\u98DF\u7528\u65B9\u5F0F\uFF01",trigger:"change"}]});var W=b.database().ref("orders/");const L=s({}),Z=()=>{W.once("value",o=>{L.value=o.val()})};s({id:"",productName:"",price:"",count:"",total:""}),s();const P=o=>{try{const u={NumberDate:f,form_name:N,form_email:S,form_phone:z,form_time:O,form_status:H,countAllTotal:D,content_add:y,content_phone:B};console.log(u),ie.sendForm("service_9rr1fgs","template_1y8azai",o.target,"WTwMAgZMHI76bOYaH",u)}catch(u){console.log({error:u})}};s();const Q=()=>{C.value=!0},R=async(o,u)=>{if(!!u){var d=b.database().ref("user/"),t=b.database().ref("orders/");b.database().ref("orders/list/"),await u.validate((m,M)=>{m&&(d.push({orderUser:n.value}),t.push({orderNo:f.value,orderUser:n.value,time:$(new Date).format("YYYY-MM-DD HH:mm"),countTotal:D.value,list:r.value}),Q(f.value,n.value,D.value))})}},X=async()=>{const o="https://sheets.googleapis.com/v4/spreadsheets/19YWnM9PrXXEUOcT9zWkQYpiZ1W3o6i-UToEGsUPcFcU/values/\u5546\u54C1\u5217\u8868?alt=json&key=AIzaSyAieT4Folrx3Tsx-iZqzu_HyNBt349BMaw";await de.get(o).then(u=>{h.value=u.data.values;for(var d=0;d<=h.value.length;d++)for(var t=h.value[0],m=0;m<=t.length;m++)t[m]})},G=s(),j=o=>{var u=[];u[0]=o[0],G.value=u[0],u[1]=o[1],u[2]=o[2];var d=1;for(var t in r.value)if(r.value[t][1]===o[1]){d=r.value[t][3]+1;var m=r.value.indexOf(r.value[t]);r.value.splice(m,1)}u[3]=d,r.value.push(u),r.value.length>0&&(w.value=!0)};s();const J=o=>{o[3]++};s([]);const K=o=>{console.log("\u6E1B\u5C11\u6578\u91CF",o),o[3]--,o[3]<=0&&r.value.splice(o,1)},I=o=>{r.value.splice(o,1)},D=se(()=>{var o=0;for(var u in r.value)o+=r.value[u][3]*r.value[u][2];return o});return te(()=>{X(),Z()}),(o,u)=>{const d=v("el-input"),t=v("el-form-item"),m=v("el-radio"),M=v("el-radio-group"),ee=v("el-date-picker"),ue=v("el-form"),T=v("el-button"),le=v("el-dialog");return p(),_("div",me,[e("ul",ce,[(p(!0),_(E,null,k(h.value,l=>(p(),_("li",{key:l},[e("a",{onClick:F=>j(l)},[(p(!0),_(E,null,k(l,F=>(p(),_("div",{key:F},[e("span",null,c(F),1)]))),128)),_e,pe],8,ve)]))),128))]),x(e("div",null,[fe,e("div",Fe,[a(ue,{ref_key:"ruleFormRef",ref:Y,onSubmit:g(P,["prevent"]),model:n.value,rules:q,"status-icon":""},{default:i(()=>[Ae,e("div",Ce,[e("div",he,[(p(!0),_(E,null,k(r.value,(l,F)=>(p(),_("div",{class:"cart",key:F},[e("div",De,[e("div",ge,c(l[1]),1),e("div",null,[e("span",be,[ye,A(c(l[2]),1)]),Be,e("span",Ve,c(l[3]),1),e("span",Ee,[ke,A(c(l[2]*l[3]),1)])]),e("div",we,[e("i",{onClick:g(V=>J(l),["prevent"]),class:"fa-solid fa-circle-plus"},null,8,Ye),e("i",{onClick:g(V=>K(l),["prevent"]),class:"fa-solid fa-circle-minus ml-2"},null,8,Me),e("i",{onClick:g(V=>I(l),["prevent"]),class:"fa-solid fa-trash"},null,8,Te)])]),e("input",{class:ne("btn"+F+1),onClick:V=>R(l,Y.value),type:"submit",value:"\u9001\u51FA\u8CFC\u7269\u8ECA"},null,10,xe)]))),128))]),e("p",Ue,[A("\u7E3D\u8A08:"),$e,A(),e("span",null,c(re(D)),1)]),e("div",Ne,[Se,a(t,{style:{display:"none"}},{default:i(()=>[a(d,{name:"NumberDate",modelValue:f.value,"onUpdate:modelValue":u[0]||(u[0]=l=>f.value=l),type:"text"},null,8,["modelValue"])]),_:1}),a(t,{label:"\u59D3\u540D",prop:"name"},{default:i(()=>[a(d,{name:"form_name",modelValue:n.value.name,"onUpdate:modelValue":u[1]||(u[1]=l=>n.value.name=l),placeholder:"\u8ACB\u8F38\u5165\u4F60\u7684\u59D3\u540D",type:"test"},null,8,["modelValue"])]),_:1}),a(t,{label:"email",prop:"email"},{default:i(()=>[a(d,{name:"form_email",modelValue:n.value.email,"onUpdate:modelValue":u[2]||(u[2]=l=>n.value.email=l),placeholder:"\u8ACB\u8F38\u5165\u4F60\u7684email",type:"email"},null,8,["modelValue"])]),_:1}),a(t,{label:"\u884C\u52D5\u96FB\u8A71",prop:"phone"},{default:i(()=>[a(d,{name:"form_phone",modelValue:n.value.phone,"onUpdate:modelValue":u[3]||(u[3]=l=>n.value.phone=l),placeholder:"\u8ACB\u8F38\u5165\u4F60\u7684\u884C\u52D5\u96FB\u8A71",type:"text"},null,8,["modelValue"])]),_:1}),a(t,{label:"\u7528\u9910\u65B9\u5F0F",prop:"status"},{default:i(()=>[a(M,{name:"form_status",modelValue:n.value.status,"onUpdate:modelValue":u[4]||(u[4]=l=>n.value.status=l)},{default:i(()=>[a(m,{label:"\u5167\u7528\u8A02\u4F4D",value:"\u5167\u7528\u8A02\u4F4D"}),a(m,{label:"\u81EA\u53D6",value:"\u81EA\u53D6"})]),_:1},8,["modelValue"])]),_:1}),x(a(t,{label:"\u7528\u9910\u6642\u9593",required:""},{default:i(()=>[e("div",ze,c(n.value.time),1),a(ee,{name:"form_time",modelValue:n.value.time,"onUpdate:modelValue":u[5]||(u[5]=l=>n.value.time=l),type:"datetime",placeholder:"\u5167\u7528\u8A02\u4F4D",format:"YYYY/MM/DD hh:mm:ss","value-format":"YYYY-MM-DD h:m:s a"},null,8,["modelValue"])]),_:1},512),[[U,n.value.status==="\u5167\u7528\u8A02\u4F4D"]]),a(t,{style:{display:"none"}},{default:i(()=>[a(d,{name:"countAllTotal"})]),_:1}),a(t,{style:{display:"none"}},{default:i(()=>[a(d,{name:"content_add",modelValue:y.value,"onUpdate:modelValue":u[6]||(u[6]=l=>y.value=l),type:"text"},null,8,["modelValue"])]),_:1}),a(t,{style:{display:"none"}},{default:i(()=>[a(d,{name:"content_phone",modelValue:B.value,"onUpdate:modelValue":u[7]||(u[7]=l=>B.value=l),type:"text"},null,8,["modelValue"])]),_:1})])])]),_:1},8,["onSubmit","model","rules"])])],512),[[U,w.value]]),a(le,{class:"addmodal",modelValue:C.value,"onUpdate:modelValue":u[10]||(u[10]=l=>C.value=l),title:"\u8A02\u55AE\u8CC7\u8A0A",center:""},{footer:i(()=>[e("span",Qe,[a(T,{onClick:u[8]||(u[8]=l=>C.value=!1)},{default:i(()=>[A("\u95DC\u9589\u8996\u7A97")]),_:1}),a(T,{type:"primary",onClick:u[9]||(u[9]=l=>C.value=!1)},{default:i(()=>[A(" \u8A02\u55AE\u5B8C\u6210 ")]),_:1})])]),default:i(()=>[e("div",He,[e("div",null,[e("b",null,c(n.value.name)+" \u5148\u751F / \u5C0F\u59D0\uFF0C\u60A8\u597D\uFF1A",1)]),Oe,e("div",qe,[e("b",null,c(f.value),1)]),We,Le,Ze,Pe])]),_:1},8,["modelValue"])])}}});export{Ke as default};
