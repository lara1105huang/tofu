import{aj as y,ak as F,al as V,am as q,an as E,ao as D,ap as M,aq as P,d as x,r as t,a as U,o as N,e as R,f as l,w as u,g as p,k as c,m as S,i as f,v as h,n as b,ar as I}from"./index.70e1c415.js";import"./firebaseConfig.543d9f42.js";const v=y(),W=F("auth",{state:()=>({user:null,errMsg:null,loading:!1}),actions:{async login(s,o){this.loading=!0,await V(v,s,o).then(a=>{this.user=a,this.loading=!1}).catch(a=>{switch(this.loading=!1,a.code){case"auth/invalid-email":this.errMsg.value="\u4E0D\u5408\u898F\u96FB\u90F5";break;case"auth/user-not-found":this.errMsg.value="\u627E\u4E0D\u5230\u8A72\u96FB\u5B50\u90F5\u4EF6\u7684\u5E33\u6236";break;case"auth/wrong-password":this.errMsg.value="\u5BC6\u78BC\u932F\u8AA4";break;default:this.errMsg.value="\u96FB\u5B50\u90F5\u4EF6\u6216\u5BC6\u78BC\u4E0D\u6B63\u78BA";break}})},async register(s,o){this.loading=!0,await q(v,s,o).then(a=>{a&&(this.user=a,E(a,{displayName:"",photoURL:""}),this.loading=!1)}).catch(()=>{this.loading=!1})},async googleSignIn(){const s=new D;M(y(),s).then(()=>{console.log("User signed in")})},async handleSignOut(){await P(v),this.user=null}},getters:{isLoading(s){return s.loading}}}),$={class:"login_page"},L=p("div",{class:"headline"},"\u8ACB\u5148\u767B\u5165",-1),O=["value"],T=x({__name:"login",setup(s){const o=t(),a=W(),B=I();t(!1);const g=t(""),r=t("");t({email:"",password:""}),U({email:[{required:!0,message:"\u96FB\u5B50\u90F5\u4EF6\u4E0D\u80FD\u70BA\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u78BC\u4E0D\u80FD\u70BA\u7A7A",trigger:"blur"}]}),t(""),t("");const k=async d=>{await a.login(g.value,r.value),B.push("/login/orders")},i=t(!1),C=d=>{!d||d.resetFields()};return N(()=>{}),(d,e)=>{const _=c("el-input"),m=c("el-form-item"),w=c("el-button"),A=c("el-form");return S(),R("div",$,[L,l(A,{ref_key:"ruleFormRef",ref:o,class:"login_in"},{default:u(()=>[l(m,{label:"\u5E33\u865F",prop:"email"},{default:u(()=>[l(_,{type:"email",modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=n=>g.value=n),required:"required"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u5BC6\u78BC",prop:"password"},{default:u(()=>[l(_,{class:"addmin_pad",type:"password",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n),required:"required"},null,8,["modelValue"]),f(p("i",{class:"fa-solid fa-eye",onClick:e[2]||(e[2]=n=>i.value=!0)},null,512),[[h,!i.value]]),f(p("i",{class:"fa-solid fa-eye-slash",onClick:e[3]||(e[3]=n=>i.value=!1)},null,512),[[h,i.value]]),f(p("input",{type:"text",class:"see_pad",value:r.value},null,8,O),[[h,i.value]])]),_:1}),l(m,null,{default:u(()=>[l(w,{class:"btn_cencel",onClick:e[4]||(e[4]=n=>C(o.value))},{default:u(()=>[b("\u91CD\u7F6E")]),_:1}),l(w,{type:"submit",class:"btn_save",onClick:k},{default:u(()=>[b("\u767B\u5165")]),_:1})]),_:1})]),_:1},512)])}}});export{T as default};
